\tocSubSubSec{\textit{SearchInput}}

\figureFrame{1}{search-input.png}{Aparência do componente \textbf{SearchInput}}

O componente \textbf{\textit{SearchInput}} é outro dos componentes que é visível nos demais ecrãs do projeto, sendo este um \textit{input} de \textbf{\glsShortUnder{html}} normal, com um estilo adicional e o uso de um icone no formato \textbf{SVG}.

De seguida é possível analisar o código produzido para este componente e, é possível notar que, em comparação aos componentes anteriores, este recebe menos propriedades, sendo a propriedade \mintinline{jsx}{onChange} responsável por executar a pesquisa sempre que existe uma alteração no valor do mesmo.

\begin{longlisting}
	\begin{minted}[]{jsx}
		const SearchInput = ({
			className,
			onChange,
			...attributes
		}: ISearchInputProps) => {
			return (
				<label className={`${styles["root"] || ""} ${className || ""}`}>
					<input type="text" {...attributes} onChange={onChange} />

					<Icon name="search" width="20px" height="20px" />
				</label>
			);
		};

		export default SearchInput;
	\end{minted}
	\caption{Código do componente \textbf{SearchInput}}
\end{longlisting}

Para facilitiar a realização da pesquisa foi utilizado um \textit{\glslinkUnder{packages}{package}} adicional, o \textbf{\href{https://fusejs.io/}{Fuse.js}}. A utilização deste \textit{\glslinkUnder{packages}{package}} é bastante simples e pode ser analisada no excerto de código que se segue.

\begin{longlisting}
	\begin{minted}[]{jsx}
		import SearchInput from "components/inputs/SearchInput/SearchInput";
		import Fuse from "fuse.js";

		// ...

		const [data, setData] = useState(athletes);

		// Search
		const options = {
			keys: ["name"]
		};

		const fuse = new Fuse(athletes, options);

		const oneSearchChange = (evt: ChangeEvent<HTMLInputElement>) => {
			if (evt.target.value !== "") {
				setData(
					fuse.search(evt.target.value).map((fuseItem) => fuseItem.item)
				);
			} else {
				setData(athletesData);
			}
		};

		return (
			// ...
			<SearchInput
				placeholder="Pesquisa"
				onChange={oneSearchChange}
			/>
		);
	\end{minted}

	\caption{Uso do componente \textbf{SearchInput} em conjunto com o \textit{package} \textbf{Fuse.js}}
\end{longlisting}

Como é possível analisar, o \textit{\glslinkUnder{packages}{package}} \textbf{Fuse.js} recebe inicialmente uma lista de valores e um objeto com as opções. Neste objeto de opções são definidas as ``keys'' (chaves) nas quais serão realizada a pesquisa.

É ainda possível encontrar a função que realiza a pesquisa sempre que o valor do \textbf{SearchInput} muda, execuntando o método \mintinline{jsx}{setData} (do \mintinline{jsx}{useState()} do \textbf{React}), mas com os valores filtrados pelo \textbf{Fuse.js}.